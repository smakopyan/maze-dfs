# maze-dfs

![gifka](config/example.gif)

Пакет для навигации робота TurtleBot3 по лабиринту с использованием алгоритмов покрытия территории.

## Описание

Пакет реализует систему автономной навигации робота для покрытия территории лабиринта с использованием комбинации алгоритмов:
- **DFS (Поиск в глубину)** для основного покрытия
- **Theta* алгоритм** для оптимального планирования пути между точками
- **YOLO** для обнаружения и избегания препятствий
- **PID управление** для точного движения

## Возможности

- Автономное покрытие лабиринта
- Обнаружение и избегание препятствий с помощью компьютерного зрения
- Оптимальное планирование пути между точками покрытия
- Визуализация пути в RViz
- Интеграция с Gazebo симуляцией

## Структура проекта

```
maze-dfs/
├── config/          # Конфигурационные файлы
├── launch/          # Файлы запуска
├── maze-dfs/        # Исходный код
│   ├── ccpp.py      # Основной класс навигации
│   ├── theta_pid.py # Реализация Theta* алгоритма
│   └── train.py     # Обучение YOLO модели
├── worlds/          # Файлы симуляции
├── data/            # Данные для обучения
└── utils/           # Вспомогательные утилиты
```

## Требования

- ROS 2 Humble или выше
- Gazebo11
- Python 3.8+
- OpenCV
- Ultralytics YOLO
- TurtleBot3 пакеты

## Установка

1. **Клонируйте репозиторий:**
   ```bash
   cd ~/turtlebot3_ws/src
   git clone https://github.com/smakopyan/maze-dfs.git
   ```

2. **Соберите пакет:**
   ```bash
   cd ~/turtlebot3_ws
   colcon build --packages-select maze-dfs
   ```

3. **Источник окружения:**
   ```bash
   source install/setup.bash
   ```

## Использование

### Запуск симуляции

1. **Запустите основной launch файл:**
   ```bash
   ros2 launch maze-dfs trash_bins_maze.launch.py
   ```

2. **Откроется:**
   - Gazebo симуляция с лабиринтом
   - RViz с визуализацией пути
   - TurtleBot3 робот в среде

### Настройка параметров

Параметры можно настроить в файле `maze-dfs/maze-dfs/config.yaml`:
- Пути к данным
- Параметры YOLO модели

## Алгоритмы

### Алгоритм покрытия

1. **Snake Move** - змейка для покрытия территории
2. **Theta* Path Planning** - оптимальное планирование пути
3. **Объектное обнаружение** - YOLO для избегания препятствий

### PID управление

- **Пропорциональный** (Kp) - реакция на текущее отклонение
- **Интегральный** (Ki) - компенсация постоянных ошибок
- **Дифференциальный** (Kd) - предотвращение перерегулирования

## Визуализация

- **Путь покрытия** - отображается в RViz
- **Карта** - OccupancyGrid с препятствиями
- **Текущее положение** - реальное время отслеживания

## Лицензия

Apache 2.0.
